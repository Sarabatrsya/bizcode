<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>SSM BIZCLASSIFY FINDER</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/img/ssm_logo.png" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <link id="googleFonts" href="https://fonts.googleapis.com/css?family=family=Lora:400,400i,700,700i|Poppins:300,400,500,600,700,800,900&amp;display=swap" rel="stylesheet" type="text/css">
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link href="css/theme.css" rel="stylesheet" />
        <link href="css/skin-it-services.css" rel="stylesheet" />
    </head>
    <body id="page-top" style="width:100vw; height:100vh; margin:0; padding:0;">
        <header id="header" class="header-effect-shrink" data-plugin-options="{'stickyEnabled': true, 'stickyEffect': 'shrink', 'stickyEnableOnBoxed': true, 'stickyEnableOnMobile': true, 'stickyChangeLogo': true, 'stickyStartAt': 30, 'stickyHeaderContainerHeight': 70}" style="height: 102.8px;">
            <div class="header-body border-top-0 box-shadow-none" style="position: fixed; top: 0px; height: auto;">
                <div class="header-container container container-xl-custom" style="height: 102px; min-height: 0px;">
                    <div class="header-row">
                        <div class="header-column">
                            <div class="header-row">
                                <div class="header-logo appear-animation animated bounceInLeft appear-animation-visible" data-appear-animation="bounceInLeft" data-appear-animation-delay="100" data-appear-animation-duration="1s" data-plugin-options="{'minWindowWidth': 0}" style="width: 260px; height: 70px; animation-duration: 1s; animation-delay: 100ms;">
                                    <a href="#"> <img alt="SSM" width="260" height="70" data-sticky-width="220" data-sticky-height="50" src="assets/img/SSM-KPDNKSH.png" style="top: 0px; width: 260px; height: 70px;">
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="header-column justify-content-end">
                            <div class="header-row">
                                <div class="header-nav header-nav-line header-nav-bottom-line header-nav-bottom-line-effect-1 order-2 order-lg-1">
                                    <div class="header-nav-main header-nav-main-square header-nav-main-dropdown-no-borders header-nav-main-mobile-white header-nav-main-dropdown-border-radius header-nav-main-text-capitalize header-nav-main-text-size-4 header-nav-main-arrows header-nav-main-effect-1 header-nav-main-sub-effect-1">
                                        <nav class="closed collapse">
                                            <ul class="nav nav-pills" id="mainNav">
                                                <!-- Home Navigation Bar -->
                                                <li class="appear-animation animated bounceInDown appear-animation-visible" data-appear-animation="bounceInDown" data-appear-animation-delay="100" data-appear-animation-duration="0.5s" data-plugin-options="{'minWindowWidth': 0}" style="animation-duration: 0.5s; animation-delay: 100ms;"><a class="nav-link active current-page-active" href="index.html"><b>Utama</b></a>
                                                </li>
                                                
                                                <!-- About Navigation Bar -->
                                                <li class="appear-animation animated bounceInDown appear-animation-visible" data-appear-animation="bounceInDown" data-appear-animation-delay="100" data-appear-animation-duration="1s" data-plugin-options="{'minWindowWidth': 0}" style="animation-duration: 1s; animation-delay: 100ms;"><a class="nav-link" href="#services"><b>Carian Kod Bidang MOF</b></a>
                                                </li>
                                                
                                            </ul>
                                        </nav>
                                    </div>
                                    <button class="btn header-btn-collapse-nav collapsed" data-bs-toggle="collapse" data-bs-target=".header-nav-main nav" aria-expanded="false">
                                        <i class="fas fa-bars"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <section class="page-section1">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase" style="color: #2E3192;">Carian Melalui Kod Bidang MOF</h2>
                </div>
                <div class="row text-center">
                    <div class="search">
                        <label class="search-label" for="searchQuery" style="color: #000;">Kod Bidang:</label>
                        <input type="text" id="searchQuery" class="search-input" style="color: #000;" placeholder="e.g: 010101 (6 digit)">
                        <button class="search-button" onclick="performSearch();">Cari</button>
                    </div>
                    <div class="result-text" id="resultText"></div>
                    <a class="reveal" href="pdf mof.pdf" target="_blank" style="font-size:14px">SENARAI KOD BIDANG
                        BEKALAN DAN PERKHIDMATAN (MOF)</a>
                    <div class="result1" id="resultContainer1" style="color: #000; display: none;">
                        <h2>INFO CARIAN</h2>
                        <table class="result-table1" id="resultTable1" style="color: #000; font-size:16px;">
                            <thead>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="result" id="resultContainer2" style="color: #000; font-size:16px; padding-bottom: 50px; display: none;">
                        <h2>JADUAL KOD MSIC</h2>
                        <table class="result-table2" id="resultTable2">
                            <thead>
                                <tr>
                                    <th>Kod MSIC</th>
                                    <th>Keterangan Kod</th>
                                    <th>Seksyen/Sektor</th>
                                    <th>Keterangan Seksyen/Sektor</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        <footer id="footer" class="bg-color-dark border-0 mt-0" style="bottom:0;">
            <div class="footer-copyright bg-color-primary">
                <div class="container container-xl-custom ">
                    <div class="row">
                        <div class="col">
                            <hr class="my-0 bg-color-light opacity-2">
                        </div>
                    </div>
                    <div class="row py-4">
                        <div class="col-sm-12 text-center">
                            <ul class="header-social-icons social-icons d-sm-block">
                                <li class="social-icons-facebook ">
                                    <a href="https://www.facebook.com/ssmofficialpage" target="_blank" title="Facebook">
                                        <i class="fab fa-facebook-f"></i>
                                    </a>
                                </li>
                                <li class="social-icons-instagram ">
                                    <a href="https://www.instagram.com/ssmofficialpage/" target="_blank" title="Instagram">
                                        <i class="fab fa-instagram"></i>
                                    </a>
                                </li>
                                <li class="social-icons-twitter ">
                                    <a href="https://twitter.com/ssmofficialpage" target="_blank" title="Twitter">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-220 -180 980 980"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
                                    </a>
                                </li>
                                <li class="social-icons-linkedin ">
                                    <a href="https://my.linkedin.com/company/suruhanjaya-syarikat-malaysia" target="_blank" title="Linkedin">
                                        <i class="fab fa-linkedin-in"></i>
                                    </a>
                                </li>
                                <li class="social-icons-youtube ">
                                    <a href="https://www.youtube.com/user/ssmofficialpage" target="_blank" title="Youtube">
                                        <i class="fab fa-youtube"></i>
                                    </a>
                                </li>
                                <li class="social-icons-telegram">
                                    <a href="https://t.me/ssmofficialpage" target="_blank" title="Telegram">
                                        <i class="fab fa-telegram"></i>
                                    </a>
                                </li>
                                <li class="social-icons-tiktok">
                                    <a href="https://www.tiktok.com/@ssmofficialpage" target="_blank" title="TikTok">
                                        <i class="fab fa-tiktok"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-lg-12 text-center" style="margin-top: 15px">
                            <p class="text-3 mb-0 text-color-light">
                                <b>© 2024 Suruhanjaya Syarikat Malaysia. All Rights</b>
                            </p>
                            <b></b>
                        </div>
                        <b></b>
                    </div>
                    <b></b>
                </div>
                <b></b>
            </div>
            <b></b>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script>
                function adjustPageSectionHeight() {
                var resultContainer2 = document.getElementById("resultContainer2");
                var pageSection = document.querySelector(".page-section1");
            
                if (resultContainer2.style.display === "none") {
                    // No result table presented, adjust page-section height
                    var windowHeight = window.innerHeight;
                    var headerHeight = document.getElementById("header").offsetHeight;
                    var footerHeight = document.getElementById("footer").offsetHeight;
                    var newHeight = windowHeight - headerHeight - footerHeight;
                    pageSection.style.height = newHeight + "px";
                } else {
                    // Result table presented, set page-section height to auto
                    pageSection.style.height = "auto";
                }
            }
        
            window.onload = function () {
                adjustPageSectionHeight(); // Initial adjustment on page load
            };
        
            window.onresize = function () {
                adjustPageSectionHeight(); // Adjust height when window is resized
            };
            function performSearch() {
                var query = document.getElementById("searchQuery").value;
                var resultContainer1 = document.getElementById("resultContainer1");
                var resultContainer2 = document.getElementById("resultContainer2");
                var resultTable1 = document.getElementById("resultTable1").getElementsByTagName("tbody")[0];
                var resultTable2 = document.getElementById("resultTable2").getElementsByTagName("tbody")[0];
                var resultText = document.getElementById("resultText");             
            
                fetch('https://sarabatrsya.pythonanywhere.com/MOF') //http://localhost:5000/MOF
                    .then(response => response.json())
                    .then(data => {
                        // Filter the data to find all matching items
                        var matchingItems = data.filter(item => item.MOF === query);
                        resultText.innerHTML ="";
                        resultTable1.innerHTML = "";
                        resultTable2.innerHTML = "";
            
                        if (matchingItems.length > 0) {
                            resultContainer1.style.display = "block";
                            resultContainer2.style.display = "block";
                            
                            matchingItems.forEach(matchingItem => {
                                resultTable1.innerHTML = "";
                                document.querySelectorAll(".result-table1 thead, .result-table2 thead").forEach(function(header) {
                                    header.style.display = "table-header-group";
                                });
                                // Show the table header for resultTable2
                                var resultTable2Header = document.querySelector(".result1 h2");
                                resultTable2Header.style.display = "block"; // Display the table header
                                
                                // Show the table header for resultTable2
                                var resultTable2Header = document.querySelector(".result h2");
                                resultTable2Header.style.display = "block"; // Display the table header
    
                                // Iterate through matching items and display them
                                addRow1(resultTable1, 'Bidang', matchingItem.bidang);
                                addRow1(resultTable1, 'Sub Bidang', matchingItem.sub);
                                addRow1(resultTable1, 'Keterangan', matchingItem.Perkara);
                                addRow1(resultTable1, 'Kod MOF', matchingItem.MOF);
                                addRow2(resultTable2, matchingItem.MSIC, matchingItem.Keterangan, matchingItem.Seksyen, matchingItem.NamaSeksyen);
                            });
                
                        } else {
                                
                            resultContainer1.style.display = "none";
                            resultContainer2.style.display = "none";
                            document.querySelectorAll(".result-table1 thead, .result-table2 thead").forEach(function(header) {
                            header.style.display = "none";
                            }); 
                            var resultTable2Header = document.querySelector(".result1 h2, .result h2");
                            resultTable2Header.style.display = "none"; // Display the table header
                                            
                            // Show the table header for resultTable2
                            var resultTable2Header = document.querySelector(".result h2");
                            resultTable2Header.style.display = "none"; // Display the table header  
                            // Display an error message
                            resultText.innerHTML = 'Carian Kod Bidang Tidak Tepat';

                            adjustPageSectionHeight();
                        }
                    })
                    .catch(error => console.error('Error:', error));
            }        
            function addRow1(table, label, value) {
                var row = table.insertRow();
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                cell1.innerHTML = '<strong>' + label + '</strong>';
                cell2.innerHTML = value;
            }              
            function addRow2(table, MSIC, Keterangan, Seksyen, NamaSeksyen) {
                var row = table.insertRow();
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                cell1.innerHTML = MSIC;
                cell2.innerHTML = Keterangan;
                cell3.innerHTML = Seksyen;
                cell4.innerHTML = NamaSeksyen;
            }        
        </script> 
    </body>
</html>
